
# Welcome to API YaMDb

[![N|Solid](https://static.djangoproject.com/img/icon-touch.e4872c4da341.png)](https://nodesource.com/products/nsolid)

## Возможности проекта:

Проект YaMDb собирает **отзывы** пользователей на **произведения**. Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку.

Произведения делятся на **категории**, такие как «Книги», «Фильмы», «Музыка». Например, в категории «Книги» могут быть произведения «Винни-Пух и все-все-все» и «Марсианские хроники», а в категории «Музыка» — песня «Давеча» группы «Жуки» и вторая сюита Баха. Список категорий может быть расширен (например, можно добавить категорию «Изобразительное искусство» или «Ювелирка»).

Произведению может быть присвоен **жанр** из списка предустановленных (например, «Сказка», «Рок» или «Артхаус»).

Добавлять произведения, категории и жанры может только администратор.

Благодарные или возмущённые пользователи оставляют к произведениям текстовые **отзывы** и ставят произведению оценку в диапазоне от одного до десяти (целое число); из пользовательских оценок формируется усреднённая оценка произведения — **рейтинг** (целое число). На одно произведение пользователь может оставить только один отзыв.

Пользователи могут оставлять **комментарии** к отзывам.

Добавлять отзывы, комментарии и ставить оценки могут только аутентифицированные пользователи.
И всё это с помощью API запросов!

## Стек использованных технологий:

- [Django](https://www.djangoproject.com/) - бесплатный и свободный фреймворк для веб-приложений, написанный на Python.
- [Django REST Framework](https://www.django-rest-framework.org/) - мощный набор инструментов для создания веб-сервисов и API на основе фреймворка Django
- [SQLite](https://www.sqlite.org/) - компактная встраиваемая СУБД.
- [Simple JWT](https://django-rest-framework-simplejwt.readthedocs.io/en/latest/) - Реализация авторизации по токенам в DRF.

### Как запустить проект:

Клонировать репозиторий и перейти в него в командной строке:

```
git clone git@github.com:warqone/api_yamdb.git
```

```
cd api_final_yatube
```

Cоздать и активировать виртуальное окружение:

```
python3 -m venv .venv
```

```
source .venv/bin/activate
```

Установить зависимости из файла requirements.txt:

```
python3 -m pip install --upgrade pip
```

```
pip install -r requirements.txt
```

Выполнить миграции:

```
python3 manage.py makemigrations
python3 manage.py migrate
```

Запустить проект:

```
python3 manage.py runserver
```
## Алгоритм регистрации пользователей

1.  Пользователь отправляет POST-запрос на добавление нового пользователя с параметрами  `email`  и  `username`  на эндпоинт  `/api/v1/auth/signup/`.
2.  **YaMDB**  отправляет письмо с кодом подтверждения (`confirmation_code`) на адрес  `email`.
3.  Пользователь отправляет POST-запрос с параметрами  `username`  и  `confirmation_code`  на эндпоинт  `/api/v1/auth/token/`, в ответе на запрос ему приходит  `token`  (JWT-токен).
4.  При желании пользователь отправляет PATCH-запрос на эндпоинт  `/api/v1/users/me/`  и заполняет поля в своём профайле (описание полей — в документации).
## Примеры запросов и ответов:

Регистрация на сайте
```
# url: /api/v1/auth/signup/
# method POST
{
    "username": "your_name",
    "email": "your_email@gmail.com"
}
```
```
# RESPONSE
{
    "username": "your_name",
    "email": "your_email@gmail.com
}
Так же на вашу почту придёт код подтверждения.
```
Авторизация на сайте
```
# url: /api/v1/auth/token/
# method POST
{
    "username": "your_name",
    "confirmation_code": "your_confirmation_code"
}
```
```
# RESPONSE
{
    "token": "your_token",
}
```
### Сохраните токен. Используйте его для запросов от авторизованного пользователя.
Токен необходимо передавать в заголовке
```
"Authorization": "Bearer your_token"
```

## Другие виды запросов
##### Все примеры запросов можете посмотреть в [документации API](https://localhost:8000/redoc).

## Иморт из CSV файлов:
Команда для импорта: python manage.py import_csv \
    --categories (путь к файлу)/category.csv \
    --genres (путь к файлу)/genre.csv \
    --titles (путь к файлу)/titles.csv \
    --users (путь к файлу)/users.csv \
    --reviews (путь к файлу)/review.csv \
    --comments (путь к файлу)/comments.csv \
    --genre_title (путь к файлу)/genre_title.csv
    Например: --categories data/category.csv

## Авторы: 
### Вадим Каримов: [warqone](https://github.com/warqone)
```
Управление пользователями.
-   система регистрации и аутентификации,
-   права доступа,
-   работа с токеном,
-   система подтверждения через e-mail.
```
### Денис Кучменко: [DKuchm](https://github.com/DKuchm)
```
Модели, view и эндпойнты для  
- произведений, категорий, жанров.
- реализовал импорт данных из `csv` файлов.
   ```
        
### Урал Халилов: [UralKhalilov](https://github.com/UralKhalilov)
```
Отзывы,
Комментарии,
Рейтинги произведений.
```
За прекод спасибо: [evi1ghost](https://github.com/evi1ghost)
За ревью спасибо: [Port-tf](https://github.com/Port-tf)
